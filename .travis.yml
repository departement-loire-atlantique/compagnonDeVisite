language: node_js

node_js:
  - 16

install:
  - npm install
  - npm install -g @angular/cli

script:
  - ng build -c pre-prod
  - cd dist/compagnon-de-visite
  - zip -r "${TRAVIS_BUILD_DIR}/compagnon_de_visite_${TRAVIS_TAG}.zip" * 
  
deploy:
  provider: releases
  api_key:
    secure: GE6Oz8ujvJmba2p1v75oT+fNDcgf3XHh3RjCzqq33rwXm/q7gFYy8Cs2hmCmLmvM60awvjYwwsb/YHCjxr7FchHmybtmI390wyYjA/4EkezCr4TGW7R3WeWa875tA7j60B73I/+m/fjC9ZEHnRr7glGzMIMU7MfWH5QXwHQ+v4ZW1z/3no+dGOCDM08sk79/TO1bJidnP5XVaO6Txa8fPHNMfmgl31h8oYEUHEErw6ocp2sbxf0sPzPSrW87WyE9zxhMWGzuatMbyAbTjm+Mlcp0FIa2lZ4NBw+QWiOkUQEO34kTFMgk7Wgsp9TnsFI6VBBBqAHnPJrQHxjAOMAy0yViXjI4pRdUJEeNJiGXnbrPF0lUYXIIO8t6P1eSsuwrx+n/PPz79vuteDC/IybuzpyiRl81d5Ekhic652hl44IXotsSNI9L9QeM43PUVOAJbE9XXRw2GFfST6KNzw/iE8iqT6LWLns7YOqbQ6B7FfBiUYixobt3olq7IsAn+GgLx7GYGgc8N4iVV9dPUxqzNH9us0rRWzXMbu7Houy5jkE9gLM6xUokhr2oDI1mH4ww8tiBD2zcSFK0wZp0MXUdjM2nDEuyuiIM7N+yFgZuIloG+vV7PJhObaNB88O7MfeLRz2mC8LRsczNC43OljjLIElZY+PTwljLVHmKz7a4ydo=
  file_glob: true
  file: "${TRAVIS_BUILD_DIR}/*.zip"
  skip_cleanup: true
  on:
    tags: true
